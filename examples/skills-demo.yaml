# Skills Demo Workflow
# Demonstrates progressive skill loading (Claude Code-like behavior)
#
# This workflow shows how agents can dynamically load specialized skills
# on demand, reducing initial prompt size and improving efficiency.

name: skills-demo
version: 1.0.0
description: |
  Demonstration of progressive skill loading with Anthropic official skills.
  The agent will automatically load the xlsx skill when it detects a
  spreadsheet-related task, then use the loaded instructions to create
  a properly formatted Excel file with formulas.

# Skills Configuration
# Skills are listed here with metadata. Full content is loaded on-demand.
skills:
  - id: pdf
    path: ./skills/pdf
    description: Comprehensive PDF manipulation toolkit for extracting text and tables, creating new PDFs, merging/splitting documents, and handling forms

  - id: xlsx
    path: ./skills/xlsx
    description: Comprehensive spreadsheet creation, editing, and analysis with support for formulas, formatting, data analysis, and visualization

  - id: docx
    path: ./skills/docx
    description: Comprehensive document creation, editing, and analysis with support for tracked changes, comments, formatting preservation, and text extraction

  - id: pptx
    path: ./skills/pptx
    description: Presentation creation, editing, and analysis for creating and modifying PowerPoint files

# Runtime Configuration
runtime:
  provider: openai
  model_id: gpt-5-nano

# Agent Definition
agents:
  data-processor:
    prompt: |
      You are a helpful data processing assistant with access to specialized skills.

      When you encounter tasks that require specific expertise (like PDF processing,
      spreadsheet manipulation, document creation, or presentations), you should load
      the relevant skill to get detailed instructions and code patterns.

      To load a skill, call: Skill("skill_id")

      For this task:
      1. Analyze what's needed and load the appropriate skill
      2. Write complete, executable Python code following the skill's guidelines
      3. Return ONLY the Python code that creates the requested file
      4. Do not include explanations or markdown formatting - just the raw Python code

      The code will be automatically executed and saved as an artifact.
    tools:
      - python_exec

# Pattern: Chain (single step to demonstrate skill loading)
pattern:
  type: chain
  config:
    steps:
      - agent: data-processor
        input: |
          Create a financial model in Excel for a small startup's revenue projections.
          Output filename: revenue_projections.xlsx

          Requirements:
          1. Create a 3-year revenue projection (2025-2027)
          2. Include these key metrics with formulas (not hardcoded values):
             - Monthly Recurring Revenue (MRR)
             - Annual Revenue (MRR * 12)
             - Growth rate (year-over-year)
          3. Use proper financial modeling color coding:
             - Blue text for user inputs (growth assumptions)
             - Black text for all formulas
          4. Format currency with $ signs and commas
          5. Include a clear header row with bold formatting
          6. Auto-adjust column widths

          Sample data structure:
          - Year: 2025, 2026, 2027
          - Starting MRR: $10,000
          - Monthly growth rate: 5% (user can change this - blue text)

          Return complete Python code that creates this file following industry best practices.

# Outputs: Save the generated Python code as an artifact
outputs:
  artifacts:
    - path: ./create_revenue_model.py
      from: "{{ last_response }}"
