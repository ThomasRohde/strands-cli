version: 0
name: "orchestrator-minimal-ollama"
description: "Minimal orchestrator example with local Ollama (no reduce or writeup)"

runtime:
  provider: openai
  model_id: gpt-5-nano

inputs:
  values:
    project: "strands-cli documentation"
    sections: 3

agents:
  planner:
    prompt: |
      You are a documentation planner. Break down the "{{ project }}" into {{ sections }} documentation sections.
      
      Respond with ONLY a JSON array:
      [
        {"task": "Write section about X"},
        {"task": "Write section about Y"},
        {"task": "Write section about Z"}
      ]

  writer:
    prompt: |
      You are a technical writer. Write clear, concise documentation for the assigned section.
      Use markdown formatting. Include examples where appropriate.

pattern:
  type: orchestrator_workers
  config:
    orchestrator:
      agent: planner
      # No limits specified - unlimited workers and rounds
    
    worker_template:
      agent: writer
    
    # No reduce or writeup - workers' outputs are aggregated automatically

outputs:
  artifacts:
    - path: "./{{ project }}-docs.md"
      from: |
        # {{ project }} Documentation
        
        Generated by {{ num_workers }} workers in {{ round_count }} round(s).
        
        {% for worker in workers %}
        ## Section {{ loop.index }}
        
        {{ worker.response }}
        
        {% endfor %}
